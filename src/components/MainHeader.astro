---
import { Image } from "astro:assets";
import logo from "../assets/mjm-logo.svg";
---

<header>
  <a href="#mainContent" class="skip-link">Skip to content</a>
  <div class="wrapper">
    <a href="#mainContent">
      <Image src={logo} alt="Homepage link" />
    </a>
    <button class="mobile-menu" aria-controls="mainNav" aria-expanded="false">
      <svg fill="var(--clr-accent-1)" class="hamburger" viewBox="0 0 100 100" width="50">
        <rect class="line top" width="80" height="8" x="10" y="25" rx="5"></rect>
        <rect class="line middle" width="80" height="8" x="10" y="45" rx="5"></rect>
        <rect class="line bottom" width="80" height="8" x="10" y="65" rx="5"></rect>
      </svg>
    </button>
    <nav id="mainNav" class="primary-nav">
      <ul role="list" class="primary-nav__inner">
        <li><a href="#about">About</a></li>
        <li><a href="#skills">Skills</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#contact">Contact</a></li>
        <li>
          <a href="/src/assets/mjm-logo.svg" download>
            Resume
            <svg
              width="20"
              xmlns="http://www.w3.org/2000/svg"
              height="20"
              id="screenshot-da436653-6edb-8074-8007-79209babb61e"
              viewBox="0 0 20 20"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              fill="var(--clr-neutral-100)"
              version="1.1"
              ><g id="shape-da436653-6edb-8074-8007-79209babb61e" rx="0" ry="0"
                ><g id="shape-da436653-6edb-8074-8007-79209babb61f" style="display: none;"
                  ><g class="fills" id="fills-da436653-6edb-8074-8007-79209babb61f"
                    ><rect
                      width="20"
                      height="20"
                      x="0"
                      transform="matrix(1.000000, 0.000000, 0.000000, 1.000000, 0.000000, 0.000000)"
                      style="fill: none;"
                      ry="0"
                      fill="none"
                      rx="0"
                      y="0"></rect></g
                  ></g
                ><g id="shape-da436653-6edb-8074-8007-79209babb620"
                  ><g class="fills" id="fills-da436653-6edb-8074-8007-79209babb620"
                    ><path
                      d="M4.169921875,16.6640625L15.833984375,16.6640625L15.833984375,15L4.169921875,15M15.833984375,7.5L12.501953125,7.5L12.501953125,2.5L7.501953125,2.5L7.501953125,7.5L4.169921875,7.5L10,13.3359375L15.833984375,7.5Z"
                    ></path></g
                  ></g
                ></g
              ></svg
            >
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<style>
  header {
    background: var(--clr-primary-900);
    position: fixed;
    z-index: 999px;
    width: 100%;
  }

  .wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    color: var(--clr-neutral-100);
    padding-block: 0.25rem;
  }

  .primary-nav {
    --menu-direction: row;
    --menu-margin-left: auto;
    --menu-align-items: end;
    --menu-item-gap: 1.75rem;
    flex: 1;

    @media (width <= 48em) {
      display: none;
    }
  }

  .primary-nav__inner {
    display: flex;
    flex-direction: var(--menu-direction);
    gap: var(--menu-item-gap);
    align-items: var(--menu-align-items);

    @media (width > 48em) {
      gap: 2.25rem;
    }
  }

  .primary-nav__inner :first-child,
  .primary-nav__inner :last-child {
    margin-inline-start: var(--menu-margin-left);
  }

  ul {
    margin: 0;
  }

  .primary-nav a {
    padding: 1rem;
    display: block;
    width: 100%;
  }

  .primary-nav a:has(svg) {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .primary-nav a:is(:hover, :focus-visible) {
    background: var(--clr-accent-1);
    color: var(--clr-primary-900);
    transition:
      background 500ms ease,
      color 300ms ease;

    & svg {
      fill: var(--clr-neutral-900);
    }
  }

  /* mobile menu styles */
  .mobile-menu {
    background: transparent;
    border: 0;
    border-radius: 0.25rem;
    padding: 0.25rem;
    cursor: pointer;

    @media (width > 48em) {
      display: none;
    }
  }

  .mobile-menu .line {
    transition:
      y 300ms ease-in 300ms,
      rotate 300ms ease-in,
      opacity 0ms 300ms;
    transform-origin: center;
  }

  .mobile-menu[aria-expanded="true"] .line {
    transition:
      y 300ms ease-in,
      rotate 300ms ease-in 300ms,
      opacity 0ms 300ms;
  }

  .mobile-menu[aria-expanded="true"] :is(.top, .bottom) {
    y: 45;
  }

  .mobile-menu[aria-expanded="true"] .top {
    rotate: 45deg;
  }

  .mobile-menu[aria-expanded="true"] .middle {
    opacity: 0;
  }

  .mobile-menu[aria-expanded="true"] .bottom {
    rotate: -45deg;
  }

  @media (width < 48em) {
    .expanded {
      --menu-direction: column;
      --menu-margin-left: 0;
      --menu-align-items: start;
      --menu-item-gap: 0rem;

      display: block;
      position: absolute;
      flex-direction: column;
      top: 100%;
      right: 2rem;
      background: var(--clr-primary-900);
      box-shadow: 0 0px 5px var(--clr-neutral-600);
    }

    li {
      width: 100%;
    }
  }

  .skip-link {
    background: var(--clr-accent-1);
    color: var(--clr-primary-900);
    padding: 0.5em;
    border-radius: 0 0 0.25em 0.25em;
    position: absolute;
    left: 1rem;
    transform: translateY(-100%);
    transition: transform 300ms ease-in;
  }

  .skip-link:focus {
    transform: translateY(0%);
  }
</style>

<script>
  const mobileMenuBtn = document.querySelector(".mobile-menu");
  const hamburger = document.querySelector(".hamburger");
  const nav = document.querySelector(".primary-nav");

  function openMenu() {
    nav.classList.add("expanded");
    mobileMenuBtn.setAttribute("aria-expanded", "true");
  }

  function closeMenu() {
    nav.classList.remove("expanded");
    mobileMenuBtn.setAttribute("aria-expanded", "false");
  }

  mobileMenuBtn.addEventListener("click", () => {
    const isExpanded = mobileMenuBtn.getAttribute("aria-expanded") === "true";

    if (!isExpanded) {
      openMenu();
    } else {
      closeMenu();
    }
  });

  document.addEventListener("click", (e) => {
    const targetEl = e.target;
    if (!mobileMenuBtn.contains(targetEl) && targetEl !== mobileMenuBtn) {
      closeMenu();
    }
  });
</script>
